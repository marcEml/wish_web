{# templates/admin/ItemRank.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Les 3 articles les plus chers achetés pour une liste de souhaits{% endblock %}

{% block body %}
<nav class="admin-menu">
    <a href="{{ path('app_home') }}" class="back-to-home">
        Retour à l'accueil
    </a>

    <div class="dropdown">
        <button class="dropbtn">
            Ranking Option
            <span class="triangle">▲</span>
        </button>
        <div class="dropdown-content">           
            <a href="{{ path('top3_items') }}">
                Les 3 articles les plus chers achetés pour une liste de souhaits
            </a>           
            <a href="{{ path('top3_wishlists') }}">
                Top 3 des listes de souhaits selon la valeur totale des cadeaux achetés
            </a>
        </div>
    </div>
    
</nav>

<h1>Choisissez une liste de souhaits pour voir ses 3 articles les plus chers</h1>


<form method="get" action="{{ path('top3_items') }}">
    <label for="wishlistId">Sélectionnez une liste de souhaits:</label>
    <select name="wishlistId" id="wishlistId" onchange="this.form.submit()">
        <option value="">-- veuillez choisir --</option>
        {% for w in wishlists %}
            <option value="{{ w.id }}"
                {% if selectedWishlist and w.id == selectedWishlist.id %} selected {% endif %}
            >
                {{ w.title }}
            </option>
        {% endfor %}
    </select>
</form>

{% if selectedWishlist %}
    <h2>Top-3 Items for "{{ selectedWishlist.title }}"</h2>
    <div class="top-items">
        {% if topItems is not empty %}
            {% for item in topItems %}
                <div class="top-item">
                    <div class="top-item-image">
                        {% if item.externalLink %}
                            <img src="{{ asset(item.externalLink) }}" 
                                 alt="{{ item.name }}" 
                                 style="max-width: 100%; max-height: 100%;" />
                        {% else %}
                            <img src="{{ asset('images/placeholder.png') }}"
                                 alt="No image"
                                 style="max-width: 100%; max-height: 100%;" />
                        {% endif %}
                    </div>
                    <div class="top-item-label">
                        {{ item.name }}: {{ item.price }}€
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No items found or no items in this wishlist.</p>
        {% endif %}
    </div>
{% else %}
    <p>Veuillez sélectionner une liste de souhaits ci-dessus pour voir ses articles principaux.</p>
{% endif %}


<style>
    
    .admin-menu {
        margin-bottom: 1rem; 
    }
    .dropdown {
        position: relative;
        display: inline-block;
    }
    .dropbtn {
        background-color: #0088cc; 
        color: #fff;
        padding: 8px 16px;
        font-size: 16px;
        border: none;
        cursor: pointer;
        outline: none;
    }
    .triangle {
        font-size: 12px;
        margin-left: 8px;
    }
    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #fff;
        min-width: 250px;
        box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        z-index: 999;
    }
    .dropdown-content a {
        display: block;
        color: #333;
        padding: 12px 16px;
        text-decoration: none;
    }
    .dropdown-content a:hover {
        background-color: #f1f1f1;
    }
    .dropdown:hover .dropdown-content {
        display: block;
    }
    .dropdown:hover .dropbtn {
        background-color: #006699;
    }

    .top-items {
        display: flex;
        justify-content: space-around;
        margin-top: 2rem;
    }
    .top-item {
        display: flex;
        flex-direction: column;
        width: 150px;
        text-align: center;
        border: 1px solid #ccc;
        margin: 0 0.5rem;
    }
    .top-item-image {
        background-color: #ccc;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .top-item-label {
        background-color: #8DC63F;
        color: #fff;
        font-weight: bold;
        padding: 1rem;
        margin-top: -1px;
    }

    .back-to-home {
        display: inline-block;      
        background-color: #0088cc;
        color: #fff;
        padding: 8px 16px;
        font-size: 16px;
        border: none;
        border-radius: 4px;
        text-decoration: none;      
        margin-bottom: 1rem;        
        cursor: pointer;
    }
    .back-to-home:hover {
        background-color: #006699;
    }
</style>

{% endblock %}
